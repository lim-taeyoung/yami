{% extends "base.html" %}
{% block content %}

<h1>π›  μΈν”„λΌ μ‹νΈ μ΅°ν</h1>

<form method="get" action="/infra" class="search-form">

    <fieldset style="display:flex; flex-wrap: wrap; gap: 15px;">
        <legend>π“ μ‹νΈ μ„ νƒ</legend>
        {% for label in sheet_options %}
        <label>
            <input type="checkbox" name="selected_sheets" value="{{ label }}"
                   {% if label in selected_sheets %}checked{% endif %}>
            {{ label }}
        </label>
        {% endfor %}
    </fieldset>

    <div class="search-form" style="margin-top: 20px;">
        <label class="select-wrapper">
            <select name="filter_column">
                <option value="μ‚¬λ²" {% if filter_column == "μ‚¬λ²" %}selected{% endif %}>μ‚¬λ²</option> 
                <option value="μ§€μ‚¬" {% if filter_column == "μ§€μ‚¬" %}selected{% endif %}>μ§€μ‚¬</option>
                <option value="μ„Όν„°" {% if filter_column == "μ„Όν„°" %}selected{% endif %}>μ„Όν„°</option>
                <option value="μ ‘μ μ½”λ“" {% if filter_column == "μ ‘μ μ½”λ“" %}selected{% endif %}>μ ‘μ μ½”λ“</option>
            </select>
        </label>
        <input type="text" name="filter_value" placeholder="κ²€μƒ‰μ–΄ μ…λ ¥" value="{{ filter_value or '' }}">
        <button type="submit">π” κ²€μƒ‰</button>
        <button type="button" onclick="location.href='/main'">π  λ©”μΈμΌλ΅</button>
    </div>

</form>

<hr>

{% if tables %}
    {% for label, html in tables.items() %}
        <h2 style="margin-top: 40px;">π“„ {{ label }}</h2>
        <div class="table-wrapper">
            {{ html | safe }}
        </div>
    {% endfor %}
{% else %}
    <p style="margin-top: 30px;">β… μ‹νΈλ¥Ό μ„ νƒν•κ³  κ²€μƒ‰μ–΄λ¥Ό μ…λ ¥ν•΄ κ²°κ³Όλ¥Ό ν™•μΈν•μ„Έμ”.</p>
{% endif %}

{% endblock %}
