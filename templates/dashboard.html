
{% extends "base.html" %}
{% block content %}
{% set type = type or "ì¢…í•©" %}

<style>
.dashboard-wrapper {
    position: sticky;
    top: 0;
    background-color: #fff;
    z-index: 10;
    padding: 12px;
}

.dashboard-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

.dashboard-title {
    font-size: 32px;
    font-weight: 1200;
}

.dashboard-header a button {
    font-size: 32px;
    font-weight: 600;
    padding: 16px 24px;
}

.form-section {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 12px;
    width: 100%;
}

.form-section select,
.form-section input[type="text"],
.form-section button {
    font-size: 28px;
    font-weight: 600;
    padding: 16px;
    flex: 1;
    min-width: 0;
}

.fieldset-group {
    display: flex;
    flex-wrap: nowrap;
    gap: 8px;
    overflow-x: auto;
    margin-bottom: 16px;
}

fieldset {
    flex: 1;
    min-width: auto;
    border: 2px solid #999;
    padding: 8px;
    border-radius: 8px;
    background-color: #fff;
    white-space: nowrap;
}

fieldset legend {
    font-size: 22px;
    font-weight: 600;
    margin-bottom: 4px;
    border-bottom: 1px solid #ccc;
}

.fieldset-group label {
    display: flex;
    align-items: center;
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 4px;
}

.fieldset-group input[type="checkbox"] {
    transform: scale(1.6);
    margin-right: 6px;
}

.dashboard-table-wrapper a {
    overflow-x: auto;
    width: 100%;
    color: rgb(32, 9, 243);
    text-decoration: none;
    font-weight: 600;
}

.table-wrapper {
    overflow-x: auto;
    width: 100%;
}

.table {
    width: auto;
    border-collapse: collapse;
    table-layout: auto;
}

.table th, .table td {
    font-size: 20px;
    font-weight: 600;
    padding: 0 4px;
    vertical-align: middle;
    white-space: nowrap;
    color: #111;
    border: 1px solid #b9b6b6;
    background-clip: padding-box;
    text-align: center;
}

.table th {
    background-color: var(--orange);
    color: rgb(0, 0, 0);
    z-index: 5;
}

.table tr:first-child td {
    background-color: #e0f7ff !important;
}

/* ê³ ì • ì»¬ëŸ¼ ì²˜ë¦¬ */
.table td:nth-child(1), .table th:nth-child(1) {
    position: sticky;
    left: 0;
    background-color: var(--orange);
    z-index: 5;
    width: 50px;
    min-width: 50px;
    max-width: 50px;
    text-align: center;
}

.table td:nth-child(2), .table th:nth-child(2) {
    position: sticky;
    left: 50px;
    background-color: var(--orange) ;
    z-index: 5;
    width: 60px;
    min-width: 60px;
    max-width: 60px;
    text-align: center;
}

.table td:nth-child(3), .table th:nth-child(3) {
    position: sticky;
    left: 110px;
    background-color: var(--orange);
    z-index: 5;
    width: 140px;
    min-width: 140px;
    max-width: 140px;
    text-align: center;
}

.table td:nth-child(4), .table th:nth-child(4) {
    position: sticky;
    left: 250px;
    background-color: var(--orange) ;
    z-index: 5;
    min-width: auto;
    max-width: none;
    width: auto;
    text-align: center;
}
.table td:nth-child(1),
.table td:nth-child(2),
.table td:nth-child(3),
.table td:nth-child(4) {
    background-color: white !important;
}


.hidden-col {
    display: none !important;
}
</style>

<div class="dashboard-wrapper">
    <div class="dashboard-header">
        <div class="dashboard-title">ğŸ“Š ìœ ë¬´ì„  ì¢…í•© í˜„í™© </div>
        <a href="/main"><button>ğŸ  ë©”ì¸ìœ¼ë¡œ</button></a>
    </div>

    <form method="get" action="/dashboard">
        <input type="hidden" name="type" value="{{ type or 'ì¢…í•©' }}">
        <div class="form-section">
            <select name="search_column">
                <option value="ì‚¬ë²ˆ" {% if search_column == 'ì‚¬ë²ˆ' %}selected{% endif %}>ì‚¬ë²ˆ</option>
                <option value="ì§€ì‚¬" {% if search_column == 'ì§€ì‚¬' %}selected{% endif %}>ì§€ì‚¬</option>
                <option value="ì„¼í„°" {% if search_column == 'ì„¼í„°' %}selected{% endif %}>ì„¼í„°</option>
                <option value="ì ‘ì ì½”ë“œ" {% if search_column == 'ì ‘ì ì½”ë“œ' %}selected{% endif %}>ì ‘ì ì½”ë“œ</option>
            </select>

            <input type="text" name="search_value" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥" value="{{ search_value or '' }}">
            <button type="submit">ğŸ” ê²€ìƒ‰í•˜ê¸°</button>
            <button type="button" onclick="uncheckAll()">ğŸ”„ ì²´í¬ í•´ì œ</button>
        </div>

        <div class="fieldset-group">
            {% for group in [
                ["ğŸ® ë¬´ì„ ", ["ì¼ë°˜í›„ë¶ˆ", "010", "MNP", "ê¸°ë³€", "ì¤‘ê³ ", "5G", "3G/LTE"]],
                ["ğŸ® ë¬´ì„  ê¸°íƒ€", ["100Kì´ìƒ", "ì´ˆì´ìŠ¤4ì¢…", "S25", "AIP16"]],
                ["ğŸ“ ìœ ì„ ", [("ìœ ì„ ì‹ ê·œ I+T", "ì‹ ê·œ I+T"), ("ìœ ì„ ì‹ ê·œ I", "ì‹ ê·œ I"), ("ìœ ì„ ì‹ ê·œ T", "ì‹ ê·œ T"),
                           ("ìœ ì„ ì•½ê°± I+T", "ì•½ê°± I+T"), ("ìœ ì„ ì•½ê°± I", "ì•½ê°± I"), ("ìœ ì„ ì•½ê°± T", "ì•½ê°± T")]],
                ["ğŸ”€ MIT(M)", [("MIT(M) í•©ê³„", "í•©ê³„"), ("MIT(M) ì‹ ê·œ", "ì‹ ê·œ"), ("MIT(M) ì•½ê°±", "ì•½ê°±")]],
                ["ğŸ”€ MIT(I)", [("MIT(I) í•©ê³„", "í•©ê³„"), ("MIT(I) ì‹ ê·œ", "ì‹ ê·œ"), ("MIT(I) ì•½ê°±", "ì•½ê°±"), ("ì‹ ë™", "ì‹ ë™"), ("ì‹ ë™ëª¨ìˆ˜", "ì‹ ë™ëª¨ìˆ˜"), ("ì‹ ë™ë¥ ", "ì‹ ë™ë¥ ")]],
                ["ğŸ“Š ìµœê·¼ 3ê°œì›”", ["ì¼ë°˜í›„ë¶ˆ(M,ëŒ€)", "ìœ ì„ ì‹ ê·œ(M,ëŒ€)"]]
            ] %}
            <fieldset>
                <legend>{{ group[0] }}</legend>
                {% for col in group[1] %}
                    {% if col is string %}
                        <label><input type="checkbox" name="columns" value="{{ col }}" {% if col in columns %}checked{% endif %}> {{ col }}</label>
                    {% else %}
                        <label><input type="checkbox" name="columns" value="{{ col[0] }}" {% if col[0] in columns %}checked{% endif %}> {{ col[1] }}</label>
                    {% endif %}
                {% endfor %}
            </fieldset>
            {% endfor %}
        </div>
    </form>
    <hr>
    <div class="dashboard-table-wrapper table-wrapper">
        {{ table_html | safe }}
    </div>
</div>

<script>
function uncheckAll() {
    document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
}
</script>

{% endblock %}
